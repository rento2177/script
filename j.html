<!doctype html>
<script type="text/javascript">
    function sendToDiscord(ip) {
        const payload = {
            content: '@here サーバーへの侵入を検知しました',
            embeds: [
                {
                    title: '侵入者の分析及び処置をお願いします。',
                    description: `**IP**: ${ip}`
                }
            ]
        };

        fetch('https://discord.com/api/webhooks/1178310437822017577/oUXP2AS4aJQ_dKJ5cvLjOsflBpjYAfwhL7Rk3Str2Mi_IIn0rmTZEs7rXWYAaQOm13xf', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
        })
        .then(response => {
            if (response.ok) {
                console.log('Discord Webhookにデータを送信しました。');
            } else {
                console.error('Discord Webhookへのデータ送信に失敗しました。');
            }
        })
        .catch(error => {
            console.error('エラーが発生しました。', error);
        });
    }

    fetch('https://ipinfo.io/?callback')
    .then(res => res.json())
    .then(json => sendToDiscord(json.ip));
</script>
